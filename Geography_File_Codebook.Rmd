---
title: "BUNMD Supplementary Geography Variables File Codebook"
output:
  pdf_document:
header-includes:
- \usepackage{hyperref}
- \usepackage{float}
- \restylefloat{table}
- \usepackage{caption}
---
[^updated]: Last updated: `r format(Sys.time(), '%d %B, %Y')`

\captionsetup[table]{labelformat=empty}

| Page                        | Variable            | Label                                        |
|-----------------------------|:--------------------|:---------------------------------------------|
| \hyperlink{page.2}{2}       | \hyperlink{page.2}{ssn}                |Social Security Number                        |
| \hyperlink{page.3}{3}       | \hyperlink{page.3}{birth\_gnis\_code}              |GNIS Code of Birth Place          |
| \hyperlink{page.4}{4}       | \hyperlink{page.4}{birth\_city}              |City of Birth            | 
| \hyperlink{page.5}{5}       | \hyperlink{page.5}{birth\_city\_uncleaned}           |City of Birth Uncleaned String|
| \hyperlink{page.6}{6}       | \hyperlink{page.6}{birth\_county}              |County of Birth                    |
| \hyperlink{page.7}{7}       | \hyperlink{page.7}{birth\_region}                |Census Region of Birth            |
| \hyperlink{page.8}{8}       | \hyperlink{page.8}{death\_zip}         |ZIP Code of Death                |
| \hyperlink{page.9}{9}       | \hyperlink{page.9}{death\_state}   |FIPS code of Death County                |
| \hyperlink{page.10}{10}     | \hyperlink{page.10}{death\_state}  |State of Death                        |
| \hyperlink{page.11}{11}     | \hyperlink{page.11}{death\_city}         |City of Death                  |
| \hyperlink{page.12}{12}     | \hyperlink{page.12}{death\_county}   |County of Death                |
| \hyperlink{page.13}{13}     | \hyperlink{page.13}{death\_country}  |Country of Death                            |
| \hyperlink{page.14}{14}     | \hyperlink{page.14}{death\_region}       |Census Region of Death               |
| \hyperlink{page.15}{15}     | \hyperlink{page.15}{death\_ruc1993}       |USDA Rural-Urban Continuum Code              |

**Summary:**  The Berkeley Unified Numident Mortality Detailed Supplementary Geography Variables File (N = 42,878,885) provides information on a person's birth and death locations. This dataset provides details on the death location based on the deceased's ZIP code. It consists of 29,676,585 entries specifying birthplaces at city, county, and state levels, but it excludes data on individuals born in Washington D.C. or U.S. territories. To combine the Supplementary Geography Variables File with the BUNMD, use the individual's social security number as the linking variable.



**Methodology:**"Place of death" variables were obtained by merging the death ZIP variable with a comprehensive dataset of all US zip codes obtained from the United States Postal Service (USPS) <https://postalpro.usps.com/ZIP_Locale_Detail>. For ZIP codes that have been decommissioned, we pulled from a dataset produced by UnitedStatesZipCodes.org. Once state and county of death were obtained, we were able to match this information to US Census regions and county Federal Information Processing System (FIPS) Codes. 

The BUNMD dataset provides uncleaned birthplace strings, which often contain misspellings and unrecognizable values. To create more accurate and readable "place of birth" variables, we cleaned these strings and matched them against a Geographic Names Information System (GNIS) crosswalk. The crosswalk used was initially developed for the following research paper:

Black, Dan A., Seth G. Sanders, Evan J. Taylor, and Lowell J. Taylor. 2015. “The Impact of the Great Migration on Mortality of African Americans: Evidence from the Deep South.” American Economic Review 105(2):477–503. doi: 10.1257/aer.20120642.

\newpage 


```{r echo = F, results='hide', message=FALSE, warning=FALSE}
library(dplyr)
library(data.table)
library(tidyverse)
library(knitr)
library(forcats)

BUNMD_Geography_File <- fread("BUNMD_Geography_File.csv")
```

\newpage 

**\huge ssn**
\normalsize
\vspace{12pt}

**Label**: Social Security Number

**Description**: ssn reports a person’s Social Security number as recorded in the Numident death records.
This variable uniquely identifies all records in the dataset and can be used to merge onto the BUNMD dataset.


\newpage 

**\huge birth_gnis_code **
\normalsize
\vspace{12pt}

**Label:** GNIS Code of Birth Place

**Description**: birth_gnis_code is a numeric variable that denotes an individuals’ Geographic Names Information System (GNIS) code for their place of birth. The GNIS code maps onto physical locations located in the U.S., including longitude and latitude coordinates and physical feature names. 

For more information on GNIS codes, please see <https://www.usgs.gov/faqs/what-geographic-names-information-system-gnis>.


\newpage 

**\huge birth_city **
\normalsize
\vspace{12pt}

**Label**: City of birth

**Description**: birth_city reports the city of birth recorded in the BUNMD database. This variable is the result of the linkage between the BUNMD and GNIS crosswalk dataset. Approximately 94% of individuals in the BUNMD with city of birth information were matched with the crosswalk (29,676,585). 

To construct the “place of birth” variables, we used a crosswalk originally developed for this paper: 

Black, Dan A., Seth G. Sanders, Evan J. Taylor, and Lowell J. Taylor. 2015. “The Impact of the Great Migration on Mortality of African Americans: Evidence from the Deep South.” American Economic Review 105(2):477–503. doi: 10.1257/aer.20120642.

\newpage 

**\huge birth_city_uncleaned **
\normalsize
\vspace{12pt}

**Label**: City of birth Uncleaned String

**Description**: birth_city reports the city of birth recorded in the BUNMD database. This variable is uncleaned and unprocessed. As a result, it contains string values that could not be matched to actual city names (34,794,580) using the crosswalk mentioned above. 

\newpage 


**\huge birth_county **
\normalsize
\vspace{12pt}

**Label**: County of Birth

**Description**: birth_county reports the county of birth for an individual as a character string. 

\newpage 


**\huge birth_region **
\normalsize
\vspace{12pt}

**Label**: Census Region of Birth

**Description**:  birth_region is a categorical variable that categorizes an individual’s place of birth into one of the four Census Regions – Northeast, Midwest, South, and West – based on their state of birth. 

For more information on Census Regions, please see <https://www.census.gov/programs-surveys/economic-census/guidance-geographies/levels.html>.


```{r echo = F, message=FALSE, warning=FALSE, fig.pos="H", results='asis'}

birthregion_table <- table(BUNMD_Geography_File$birth_region, useNA = "always")

birthregion_table <- as.data.frame(birthregion_table)

birthregion_table$Freq_perc <- round((birthregion_table$Freq/sum(birthregion_table$Freq))*100, digits = 1)

kable(birthregion_table, 
      caption = "Births by Census Region",
      col.names = c("Region", "n","freq %"),
      align = c("l", "r","l"))
```

\newpage 

**\huge death_zip **
\normalsize
\vspace{12pt}

**Label**: Death ZIP Code

**Description**: death_zip is the ZIP code that is recorded at the time of death in the BUNMD. ZIP codes are primarily used for USPS mail delivery purposes, not as geographic units.

For a more detailed description of ZIP codes, please see: <https://faq.usps.com/s/article/ZIP-Code-The-Basics>.

\newpage 

**\huge death_fips **
\normalsize
\vspace{12pt}

**Label**: Death County FIPS Code

**Description**: death_fips, a numeric variable, is the FIPS code for an individual’s county of death as sourced from their ZIP code of death. 

For a more detailed description of FIPS codes, please see: <https://transition.fcc.gov/oet/info/maps/census/fips/fips.txt#:~:text=FIPS%20codes%20are%20numbers%20which,to%20which%20the%20county%20belongs>.

\newpage 

**\huge death_state **
\normalsize
\vspace{12pt}

**Label**: State of Death

**Description**: death_state reports the state the death ZIP code falls into. 

For a more detailed description of ZIP codes, please see: <https://faq.usps.com/s/article/ZIP-Code-The-Basics>.

\newpage 

**\huge death_city **
\normalsize
\vspace{12pt}

**Label**: City of Death

**Description**: death_city reports a ZIP code's primary city according to the USPS. In the case that a ZIP code crosses a city line, the city listed will be where the primary post office for that ZIP code is located.  

For a more detailed description of ZIP codes, please see: <https://faq.usps.com/s/article/ZIP-Code-The-Basics>.

\newpage 

**\huge death_county **
\normalsize
\vspace{12pt}

**Label**: County of Death

**Description**: death_county reports the county that the individual's ZIP code falls into, according to the USPS. 

\newpage 

**\huge death_country **
\normalsize
\vspace{12pt}

**Label**: Country of Death

**Description**: death_country indicates the country where the reported ZIP code is located. While the majority of these ZIP codes are within the United States, countries that host U.S. military bases on their territories may also have ZIP codes associated with them.

\newpage 

**\huge death_region **
\normalsize
\vspace{12pt}

**Label**: Census Region of Death

**Description**: death_region is a categorical variable that categorizes an individual’s place of death, based on their ZIP code and state of death, into one of the four Census Regions – Northeast, the Midwest, the South, and the West. 

```{r echo = F, results='asis'}
deathregion_table <- table(BUNMD_Geography_File$death_region, useNA = "always")

deathregion_table <- as.data.frame(deathregion_table)

deathregion_table$Freq_perc <- round((deathregion_table$Freq/sum(deathregion_table$Freq))*100, digits = 1)

kable(deathregion_table, 
      caption = "Deaths by Census Region",
      col.names = c("region", "n","freq %"),
      align = c("l", "r","l"))
```


\newpage 

**\huge death_ruc1993 **
\normalsize
\vspace{12pt}

**Label**: USDA Rural-Urban Continuum Code

**Description**: death_ruc1993 is sourced from the United States Department of Agriculture (USDA) Urban-Rural Continuum Codes, which are a classification system developed to categorize U.S. counties based on their degree of urbanization and adjacency to metropolitan areas. The system consists of ten codes, ranging from 0 to 9, where lower codes represent more urbanized counties and higher codes represent more rural areas.

For more information: <https://www.ers.usda.gov/data-products/rural-urban-continuum-codes.aspx>

```{r echo = F, results='hide', message=FALSE, warning=FALSE, results='asis'}
ruc1993_table <- table(BUNMD_Geography_File$death_ruc1993, useNA = "always")

ruc1993_table <- as.data.frame(ruc1993_table)

ruc1993_table <- ruc1993_table %>% 
  mutate(Rural_Urban_Label = factor(Var1, levels = c("0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "NA"),
                                    labels = c("Central counties of metro areas of 1 million population or more", "Fringe counties of metro areas of 1 million population or more", "Counties in metro areas of 250,000 to 1 million population", "Counties in metro areas of fewer than 250,000 population", "Urban population of 20,000 or more, adjacent to a metro area", "Urban population of 20,000 or more, not adjacent to a metro area","Urban population of 2,500 to 19,999, adjacent to a metro area","Urban population of 2,500 to 19,999, not adjacent to a metro area","Rural or fewer than 2,500 urban population, adjacent to a metro area","Rural or fewer than 2,500 urban population, not adjacent to a metro area", "NA")))

ruc1993_table$Freq_perc <- round((ruc1993_table$Freq/sum(ruc1993_table$Freq))*100,digits = 1)

ruc1993_table <- ruc1993_table[, c(1, 3, 2, 4)]
```
```{r echo = F, results='asis'} 
# Format the table with kable
kable(ruc1993_table, 
      caption = "Rural-Urban Deaths",
      col.names = c("code", "description", "n","freq %"),
      align = c("l", "r", "l","l"))
```

